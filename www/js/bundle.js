!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){!function(){var t=n(1),e=new(0,n(2).default)({R:3,Q:30}),r={},i={};function o(t){t.timeStamp=Date.now(),r[t.address]=t}function a(t){alert(t)}function s(){evothings.eddystone.startScan(o,a)}function u(t){let n=t.getData(),r=(n=n.slice(n.length-15,n.length)).map(function(t){return parseInt(e.filter(t))});t.appendFilteredData(r)}function c(t){let e=t,n=e.getFilteredData()[e.getFilteredData().length-1],r=(e.getTxPower()-n)/20;return Math.pow(10,r)}function l(){let t=document.getElementById("found-beacons");for(;t.firstChild;)t.removeChild(t.firstChild);let e="";for(key in i){let t=i[key],n=document.createElement("p");n.innerHTML="UID = "+t.getUID()+"RSSI = "+t.getRSSI()+"<br>TxPower = "+t.getTxPower()+"<br>TimeStamp = : "+t.getTimeStamp()+"<br>Data : "+t.getData()+"<br>Filtered Data : "+t.getFilteredData()+"<br>Distance : "+c(t)+"<br>",e=n,document.getElementById("found-beacons").appendChild(e)}}function d(t){return t.bid?"BID: "+p(t.bid)+"<br/>":""}function f(t){return t.rssi}function h(t){return t.txPower?t.txPower:""}function p(t){for(var e,n,r="",i=0;i<t.length;++i)r+=(e=t[i],n=void 0,((n=e.toString(16)).length<2?"0"+n:n)+" ");return r}document.addEventListener("deviceready",function(){document.querySelector("#buttons").style.display="block",alert("I am ready")},!1),document.querySelector("#start-scan").addEventListener("click",function(){setTimeout(s,500),setInterval(function(){!function(){let e="",n="",o=0,a=0;for(key in r){if(s=r[key],e=s.nid?"NID: "+p(s.nid)+"<br/>":"",n=d(r[key]),o=f(r[key]),a=h(r[key]),r[key].timeStamp,void 0===i[e])i[e]=new t(e,n,o,a);else{let t=i[e];t.appendData(o),i[e]=t}u(i[e])}var s}(),function(){let t=Date.now();for(let e in r){let n=r[e];n.timeStamp+500<t&&delete r[e]}}(),l()},500)}),document.querySelector("#stop-scan").addEventListener("click",function(){var t;t="Stopped",document.querySelector("#message").innerHTML=t,evothings.eddystone.stopScan()}),document.querySelector("#show-btn").addEventListener("click",function(){let t=document.getElementById("found-beacons");for(;t.firstChild;)t.removeChild(t.firstChild);l()}),document.querySelector("#show-beacons").addEventListener("click",function(){alert("Сейчас покажу");let t="";for(key in i){let e=document.createElement("p");e.innerHTML="UID: "+key,t+=e}document.getElementById("beacons-arr").innerHTML=t})}()},function(t,e){t.exports=class{constructor(t,e,n,r){this.UID=t,this.BID=e,this.RSSI=n,this.TxPower=r,this.data=[],this.data.push(n),this.filtered_data=[],this.timeStamp=Date.now()}getUID(){return this.UID}getTxPower(){return this.TxPower}getRSSI(){return this.RSSI}getData(){return this.data}getTimeStamp(){return this.timeStamp}appendData(t){let e=this.getData();e.push(t),this.data=e}getFilteredData(){return this.filtered_data}appendFilteredData(t){this.filtered_data=t}generateData(){return parseInt(20*Math.random()+40)}}},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});
/**
* KalmanFilter
* @class
* @author Wouter Bulten
* @see {@link http://github.com/wouterbulten/kalmanjs}
* @version Version: 1.0.0-beta
* @copyright Copyright 2015 Wouter Bulten
* @license GNU LESSER GENERAL PUBLIC LICENSE v3
* @preserve
*/
var i=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.R,r=void 0===n?1:n,i=e.Q,o=void 0===i?1:i,a=e.A,s=void 0===a?1:a,u=e.B,c=void 0===u?0:u,l=e.C,d=void 0===l?1:l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.R=r,this.Q=o,this.A=s,this.C=d,this.B=c,this.cov=NaN,this.x=NaN}return r(t,[{key:"filter",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(isNaN(this.x))this.x=1/this.C*t,this.cov=1/this.C*this.Q*(1/this.C);else{var n=this.A*this.x+this.B*e,r=this.A*this.cov*this.A+this.R,i=r*this.C*(1/(this.C*r*this.C+this.Q));this.x=n+i*(t-this.C*n),this.cov=r-i*this.C*r}return this.x}},{key:"lastMeasurement",value:function(){return this.x}},{key:"setMeasurementNoise",value:function(t){this.Q=t}},{key:"setProcessNoise",value:function(t){this.R=t}}]),t}();e.default=i}]);